<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#6366f1">
    <title>英検4級 10日間完結</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="app">
        <!-- Splash Screen -->
        <div id="splash-screen" class="screen active">
            <div class="splash-content">
                <h1 class="splash-title">英検4級</h1>
                <p class="splash-subtitle">10日間完結プログラム</p>
                <div class="loading-spinner"></div>
            </div>
        </div>

        <!-- Home Screen -->
        <div id="home-screen" class="screen">
            <header class="app-header">
                <h1>英検4級 学習プログラム</h1>
                <button id="settings-btn" class="icon-btn" aria-label="設定">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6m0-6h6m-6 0H6"></path>
                    </svg>
                </button>
            </header>

            <div class="progress-overview">
                <h2>学習進捗</h2>
                <div class="progress-bar">
                    <div id="overall-progress" class="progress-fill"></div>
                </div>
                <p id="progress-text">0% 完了</p>
            </div>

            <div class="quick-actions">
                <button id="review-mode-btn" class="action-btn action-btn-review">
                    <span class="action-icon">📝</span>
                    <div class="action-info">
                        <span class="action-title">復習モード</span>
                        <span class="action-subtitle" id="review-count">0問</span>
                    </div>
                </button>
                <button id="statistics-btn" class="action-btn action-btn-stats">
                    <span class="action-icon">📊</span>
                    <div class="action-info">
                        <span class="action-title">学習統計</span>
                        <span class="action-subtitle">見る</span>
                    </div>
                </button>
            
            <div class="prep-section">
                <h2>事前学習・参照</h2>
                <div class="prep-actions">
                    <button id="prestudy-btn" class="action-btn action-btn-prep">
                        <span class="action-icon">🚀</span>
                        <div class="action-info">
                            <span class="action-title">事前学習</span>
                            <span class="action-subtitle" id="prestudy-subtitle">Day1を始める前に</span>
                        </div>
                    </button>
                    <button id="freq-words-btn" class="action-btn action-btn-prep">
                        <span class="action-icon">📚</span>
                        <div class="action-info">
                            <span class="action-title">頻出単語</span>
                            <span class="action-subtitle">参照用</span>
                        </div>
                    </button>
                    <button id="freq-phrases-btn" class="action-btn action-btn-prep">
                        <span class="action-icon">💬</span>
                        <div class="action-info">
                            <span class="action-title">頻出熟語</span>
                            <span class="action-subtitle">参照用</span>
                        </div>
                    </button>
                </div>
                <p class="prep-status" id="prestudy-status"></p>
            </div>

</div>

            <div class="day-grid" id="day-grid">
                <!-- Day cards will be generated here -->
            </div>
        </div>

        <!-- Day Detail Screen -->
        <div id="day-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="day-back-btn">← 戻る</button>
                <h2 id="day-title">Day 1</h2>
            </header>

            <div class="day-content">
                <div class="day-description" id="day-description"></div>
                <div class="section-list" id="section-list">
                    <!-- Sections will be generated here -->
                </div>
            </div>
        </div>

        <!-- Vocabulary Screen -->
        <div id="vocabulary-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="vocab-back-btn">← 戻る</button>
                <h2>単語学習</h2>
                <span id="vocab-progress" class="progress-indicator">0/30</span>
            </header>

            <div class="quiz-content" id="vocab-content">
                <!-- Vocabulary quiz will be rendered here -->
            </div>
        </div>

        <!-- Grammar Screen -->
        <div id="grammar-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="grammar-back-btn">← 戻る</button>
                <h2>文法学習</h2>
                <span id="grammar-progress" class="progress-indicator">0/10</span>
            </header>

            <div class="quiz-content" id="grammar-content">
                <!-- Grammar quiz will be rendered here -->
            </div>
        </div>

        <!-- Listening Screen -->
        <div id="listening-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="listening-back-btn">← 戻る</button>
                <h2>リスニング</h2>
                <span id="listening-progress" class="progress-indicator">0/5</span>
            </header>

            <div class="quiz-content" id="listening-content">
                <!-- Listening quiz will be rendered here -->
            </div>
        </div>

        <!-- Reading Screen -->
        <div id="reading-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="reading-back-btn">← 戻る</button>
                <h2>読解</h2>
                <span id="reading-progress" class="progress-indicator">0/3</span>
            </header>

            <div class="quiz-content" id="reading-content">
                <!-- Reading quiz will be rendered here -->
            </div>
        </div>

        <!-- Mock Exam Screen -->
        <div id="exam-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="exam-back-btn">← 戻る</button>
                <h2>模擬試験</h2>
                <span id="exam-timer" class="timer">45:00</span>
            </header>

            <div class="exam-content" id="exam-content">
                <!-- Exam will be rendered here -->
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="screen">
            <div class="result-content">
                <h2>結果</h2>
                <div id="result-details">
                    <!-- Results will be rendered here -->
                </div>
                <button id="result-continue-btn" class="primary-btn">続ける</button>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="settings-back-btn">← 戻る</button>
                <h2>設定</h2>
            </header>

            <div class="settings-content">
                <div class="setting-item">
                    <label for="audio-speed">音声速度</label>
                    <select id="audio-speed">
                        <option value="0.75">遅い (0.75x)</option>
                        <option value="1.0" selected>標準 (1.0x)</option>
                    </select>
                </div>

                <div class="setting-item">
                    <label for="font-size">フォントサイズ</label>
                    <select id="font-size">
                        <option value="normal" selected>標準</option>
                        <option value="large">大きい</option>
                    </select>
                </div>

                <div class="setting-item">
                    <button id="reset-data-btn" class="danger-btn">すべてのデータをリセット</button>
                </div>

                <div class="setting-item">
                    <h3>使い方</h3>
                    <p>1. Day 1から順番に学習を進めます</p>
                    <p>2. 各Dayには単語・文法・リスニング・読解が含まれます</p>
                    <p>3. すべて完了すると次のDayに進めます</p>
                    <p>4. Day 10で模擬試験に挑戦できます</p>
                </div>
            </div>
        </div>

        <!-- Review Mode Screen -->
        <div id="review-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="review-back-btn">← 戻る</button>
                <h2>復習モード</h2>
                <span id="review-progress" class="progress-indicator">0/0</span>
            </header>

            <div class="quiz-content" id="review-content">
                <!-- Review quiz will be rendered here -->
            </div>
        </div>

        <!-- Statistics Screen -->
        <div id="statistics-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="statistics-back-btn">← 戻る</button>
                <h2>学習統計</h2>
            </header>

            <div class="statistics-content" id="statistics-content">
                <!-- Statistics will be rendered here -->
            </div>
        </div>
    </div>


        <!-- Pre-study Screen -->
        <div id="prestudy-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="prestudy-back-btn">← 戻る</button>
                <h2>事前学習</h2>
                <button class="pill-btn" id="prestudy-complete-btn">完了にする</button>
            </header>

            <div class="prestudy-content" id="prestudy-content">
                <!-- Pre-study content will be rendered here -->
            </div>
        </div>

        <!-- Frequent Words Screen -->
        <div id="freq-words-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="freq-words-back-btn">← 戻る</button>
                <h2>頻出単語（参照用）</h2>
            </header>

            <div class="reference-toolbar">
                <input type="text" id="freq-words-search" class="search-input" placeholder="検索（例：go / 行く）">
                <select id="freq-words-category" class="select-input">
                    <option value="all">すべて</option>
                </select>
            </div>

            <div class="reference-content" id="freq-words-content">
                <!-- Words will be rendered here -->
            </div>
        </div>

        <!-- Frequent Phrases Screen -->
        <div id="freq-phrases-screen" class="screen">
            <header class="screen-header">
                <button class="back-btn" id="freq-phrases-back-btn">← 戻る</button>
                <h2>頻出熟語（参照用）</h2>
            </header>

            <div class="reference-toolbar">
                <input type="text" id="freq-phrases-search" class="search-input" placeholder="検索（例：look for / 探す）">
                <select id="freq-phrases-category" class="select-input">
                    <option value="all">すべて</option>
                </select>
            </div>

            <div class="reference-content" id="freq-phrases-content">
                <!-- Phrases will be rendered here -->
            </div>
        </div>

    <!-- Scripts -->
    <script src="utils/storage.js"></script>
    <script src="utils/audio.js"></script>
    <script src="modules/vocabulary.js"></script>
    <script src="modules/grammar.js"></script>
    <script src="modules/listening.js"></script>
    <script src="modules/reading.js"></script>
    <script src="modules/prestudy.js"></script>
    <script src="modules/reference.js"></script>
    <script src="modules/mock-exam.js"></script>
    <script src="modules/review.js"></script>
    <script src="modules/statistics.js"></script>
    <script src="app.js"></script>

    <script>
        // Register service worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed'));
            });
        }
    </script>
</body>

</html>